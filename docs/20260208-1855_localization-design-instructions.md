# 로컬라이징 설계 작업 지시서

## 목표
언어 선택 우선순위를 다음 규칙으로 정의하고, UI 전반에 일관되게 적용한다.

우선순위:
1. 브라우저 언어
2. 유저가 변경 가능
3. 유저 변경 값이 있으면 해당 언어로 출력

## 설계 원칙
- 기본 언어는 브라우저 언어를 따른다.
- 유저가 언어를 변경하면 그 값을 **영구 저장**하여 이후 항상 우선 적용한다.
- 유저 변경값이 없다면 브라우저 언어를 사용한다.

## 적용 범위
- 날짜/시간 포맷
- UI 텍스트(추후 국제화 확장 시 적용 가능)
 - 언어 선택 UI 및 상태 연동

## 상태 저장 방식
- 클라이언트 저장소 사용 (우선: `localStorage`)
- 키 예시: `molt_lang`
- 값 예시: `en`, `ko`, `ja`, `zh` 등

## 언어 결정 로직
1. `localStorage`에 저장된 언어 값 존재 여부 확인
2. 존재하면 그 값 사용
3. 없으면 `navigator.language` 또는 `navigator.languages[0]` 사용
4. 지원 언어 목록에 없으면 기본값(`en`)으로 폴백

## 구현 가이드

### 1) 언어 결정 유틸
- `src/lib/i18n.ts` 또는 유사한 위치에 함수 정의
- 예시 함수:
  - `getPreferredLanguage()`
  - `setPreferredLanguage(lang: string)`

### 2) 전역 상태
- 언어 변경 시 즉시 UI에 반영되도록 전역 상태가 필요
- 권장: React Context (`LanguageProvider`) + `useLanguage()` 훅
- 초기 값은 `getPreferredLanguage()`로 결정

### 3) UI 연동 (필수)
- 상단 헤더 또는 설정 패널에 언어 선택 UI 추가
  - 예: 드롭다운(EN/KO/JA/zh) 또는 토글
  - 최소 요구: EN/KO
- UI 변경 시 `setPreferredLanguage` 실행 + 전역 상태 업데이트
- 페이지 리로드 없이 즉시 반영되도록 구성

### 4) 컴포넌트 사용
- 날짜/텍스트 출력부는 전역 언어 상태를 참조
- `Intl.DateTimeFormat(currentLang, ...)` 방식으로 일관 적용

## 구현 단계
1. 지원 언어 목록 정의
2. 언어 결정 유틸 함수 구현
3. 전역 상태(Provider + Hook) 구성
4. 언어 선택 UI 추가 및 전역 상태 연동
5. 기존 날짜/텍스트 출력부에서 전역 언어 상태 사용
6. 유저 변경 시 로컬 저장 적용

## 완료 기준
- 브라우저 언어가 기본값으로 적용된다.
- 유저가 언어를 변경하면 저장되고 다음 접속에도 유지된다.
- 유저 변경 값이 있으면 항상 그 언어로 출력된다.
 - UI에서 언어 변경이 가능하고 즉시 반영된다.
